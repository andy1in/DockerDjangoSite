{% extends "base.html" %}
{% load static %}

{% block title %}–í—Å–µ –∫—É—Ä—Å—ã{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/blog.css' %}">
{% endblock %}

{% block content %}
<div class="layout">
    <main class="content">
        <h1>–°–ø–∏—Å–æ–∫ –≥–∞–π–¥–æ–≤ üíú</h1>

        {% for category in categories %}
            <section class="category-section">
                <h2 class="category-title">{{ category.name }}</h2>

                {% for section in category.sections.all %}
                    <div class="section-block">
                        <button class="section-toggle">{{ section.name }}</button>

                        <ul class="section-content">
                            {% for post in section.posts.all %}
                                <li class="lesson-item">
                                    <a href="{% url 'detail' post.id %}" class="lesson-link">
                                        {{ post.title }} <!--{{ post.description }}  -->
                                        <span class="lesson-author">({{ post.author }})</span>
                                    </a>
                                </li>
                            {% empty %}
                                <li class="empty">–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –ø–æ–∫–∞ –Ω–µ—Ç —É—Ä–æ–∫–æ–≤</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% empty %}
                    <p class="empty">–í –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ—Ç —Ä–∞–∑–¥–µ–ª–æ–≤</p>
                {% endfor %}
            </section>
        {% endfor %}
    </main>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const toggles = document.querySelectorAll('.section-toggle');

    toggles.forEach(btn => {
        const content = btn.nextElementSibling;

        // üîì –æ—Ç–∫—Ä—ã—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        content.classList.add('open');
        btn.classList.add('active');

        // üîÅ –æ—Å—Ç–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∫—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
        btn.addEventListener('click', () => {
            content.classList.toggle('open');
            btn.classList.toggle('active');
        });
    });
});
</script>
{% endblock %}
